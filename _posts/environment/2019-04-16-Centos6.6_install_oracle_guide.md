---
layout: post
title: Centos6安装Oracle详解
date: 2019-04-16
tags: 环境
---  

### 环境准备  
- Centos6.6
- [linux.x64_11gR2_database_1of2.zip](https://www.oracle.com/technetwork/database/enterprise-edition/downloads/112010-linx8664soft-100572.html)
- [linux.x64_11gR2_database_2of2.zip](https://www.oracle.com/technetwork/database/enterprise-edition/downloads/112010-linx8664soft-100572.html)

### 安装指导
[CentOS6.7安装Oracle 11g2R傻瓜图文教程](https://blog.csdn.net/vampirehgg/article/details/51534306)  
[oracle设置/etc/sysctl.conf参数详解](https://blog.51cto.com/605621540/1946578)  

安装完成后可以通过浏览器访问http://10.110.181.99:5500/em  

### Oracle常用操作
- [SQLPlus 在连接时通常有四种方式](https://blog.csdn.net/u010533843/article/details/79567189)
  1. sqlplus / as sysdba
  2. sqlplus username/password
  3. sqlplus usernaem/password@orcl
  4. sqlplus username/password@//host:port/sid  

- hostname设置需要一致  
  1. /etc/hosts  
  ```
  127.0.0.1   localhost localhost.localdomain
  10.110.181.99   oracle
  ```
  2. /etc/sysconfig/network  
  ```
  HOSTNAME=oracle
  ```
  3. app/oracle/product/11.2.0/dbhome_1/network/admin/listener.ora  
  ```
  (ADDRESS = (PROTOCOL = TCP)(HOST = oracle)(PORT = 1521))
  ```
  4. app/oracle/product/11.2.0/dbhome_1/network/admin/tnsnames.ora  
  ```
  (ADDRESS = (PROTOCOL = TCP)(HOST = oracle)(PORT = 1521))
  ```
  5. 配置完成后重启网络服务`service network restart`。执行`hostname`命令输出需为`oracle`


- 重启监听listener  
  ```
  # su - oracle
  $ lsnrctl start     #启用监听
  $ lsnrctl stop      #停止监听
  $ lsnrctl status    #检查监听器的状态
  $ lsnrctl reload    #重启监听器
  ```

- 重启数据库实例  
  ```
  # su - oracle
  $ sqlplus / nolog
  SQL> conn / as sysdba
  SQL> shutdown immediate   #关闭数据库
  SQL> startup              #启动数据库
  SQL> exit
  ```

- oracle新建数据库、新建用户并授权
  1. 创建用户
  ```
  create user username identified by password;
  ```
  username: 用户名  
  password: 密码  
  2. 创建表空间  
  ```
  create tablespace tablespacename datafile '/home/oracle/app/oradata/data.dbf' size xxxm;
  ```
  tablespacename: 表空间的名字  
  /home/oracle/app/oradata/data.dbf: 表空间的存储位置
  xxx：表空间的大小，m单位为兆
  3. 将空间分配给用户
  ```
  alert user username default tablespace tablespacename;
  ```
  4. 给用户授权
  ```
  grant create session,create table,unlimited tablespace to username;
  ```
  5. 使用创建的用户登录，登录之后即可创建表
  ```
  conn username/password;
  ```

### 常见错误
- [emctl start dbconsole遇到错误：OC4J Configuration issue](https://blog.csdn.net/pilearn/article/details/8817937)  
- [ora-12541: tns no listener](http://www.orafaq.com/wiki/ORA-12541)  
- [OC4J Configuration issue. /home/oracle/app/oracle/product/11.2.0/dbhome_1/oc4j/j2ee/OC4J_DBConsole_oracle_orcl not found.](https://bbs.csdn.net/topics/290087662)
- [Oracle11g重建EM 报ORA-20001: SYSMAN already exists](https://www.cnblogs.com/rusking/p/4394025.html)
